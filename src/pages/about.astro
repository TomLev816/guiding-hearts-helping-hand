---
import { getCollection } from "astro:content";
import { Picture } from "astro:assets";
import Layout from "@/layouts/Layout.astro";
import Container from "@/components/container.astro";
import Sectionhead from "@/components/sectionhead.astro";

// Filter team entries with 'draft: false' & date before current date
const publishedTeamMembers = await getCollection("team", ({ data }) => {
  console.log(data)
  return !data.draft && data.publishDate < new Date();
});
---

<Layout title="About Us ">
  <Container>


    <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>About Us</title>

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
          href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Lato:wght@400;700&display=swap"
          rel="stylesheet"
        />

        <style>
          /* Global font styles */
          .font-serif {
            font-family: "Playfair Display", serif;
          }
          .font-sans {
            font-family: "Lato", sans-serif;
          }
        </style>
      </head>
      <body class="font-sans bg-white">
        <!-- Page Header -->
        <header class="bg-[#fbfaf8] py-20 px-4 sm:px-6 lg:px-8">
          <div class="max-w-4xl mx-auto text-center">
            <h1
              class="font-serif text-4xl md:text-5xl lg:text-6xl text-[#393836] font-bold leading-tight"
            >
              Meet Our Team
            </h1>

          </div>
        </header>

        <!-- Main Content: Team Section -->
        <main class="py-20 px-4 sm:px-6 lg:px-8">
          <div class="max-w-5xl mx-auto">

            <div
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-10"
            >
              {
                publishedTeamMembers.map((teamMemberEntry) => (
                  <div class="group text-center">
                    <div class="w-48 h-48 mx-auto">
                      <Picture
                        src={teamMemberEntry.data.avatar.src}
                        alt={teamMemberEntry.data.avatar.alt}
                        sizes="(max-width: 640px) 100vw, 192px"
                        width={192}
                        height={192}
                        class="w-full h-full rounded-full transition group-hover:shadow-xl object-cover object-center"
                      />
                    </div>

                    <div class="mt-6">
                      <h3 class="font-serif text-2xl text-[#393836]">
                        {teamMemberEntry.data.name}
                      </h3>

                       <p class="mt-4 text-base text-[#575654] leading-relaxed text-left">
                        {teamMemberEntry.data.about}
                      </p>
                    </div>
                  </div>
                ))
              }
            </div>
          </div>
        </main>
      </body>
    </html>
  </Container>
</Layout>
